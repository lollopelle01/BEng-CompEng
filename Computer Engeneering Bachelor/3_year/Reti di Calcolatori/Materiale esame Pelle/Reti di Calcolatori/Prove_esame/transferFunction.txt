void trasnferTextsInsideDir(char *nomeDir, int connfd, int error) {
    DIR *dirStream;
    struct dirent *dirEntry;
    int ok;
    int nameLength;
    int fd;
    char c;
    char base[MAXLINELENGTH];
    StaticString nomeFile;

    dirStream = opendir(nomeDir);
    error = 0;

    if (dirStream == NULL) {
        error = -1;
        return;
    }

    errno = 0;
    while ((dirEntry = readdir(dirStream)) != NULL) {
        if(dirEntry->d_type == DT_REG) { //file regolare, devo ancora controllare che sia un file di testo
            nameLength = strlen(dirEntry->d_name);
            if (nameLength > 4 && !strcmp(dirEntry->d_name + nameLength - 4, ".txt")) { //trovato file di testo
                strcpy(base, nomeDir);
                strcat(base, "/");
                strcat(base, dirEntry->d_name);

                fd = open(base, O_RDONLY);
                if (fd < 0) {
                    break; //uscendo dal ciclo a causa di un errore di open, errno è settato
                }

                strcpy(nomeFile, dirEntry->d_name);
                ok = write(connfd, nomeFile, sizeof(StaticString));
                if (ok < 0) {
                    break;
                }
                while ((ok = read(fd, &c, sizeof(char))) > 0) {
                    ok = write(connfd, &c, sizeof(char));
                        if (ok < 0) {
                            break; //esco dal ciclo interno
                        }
                }
                if (ok < 0) {
                    break;
                }
                close(fd);
                c = '\0'; //segnalo che è finito il trasferimento dei dati di un file 
                ok = write(connfd, &c, sizeof(char));
            }
        }
    }

    if (errno != 0) {
        error = -2;
    }
    closedir(dirStream);

    return;
}
