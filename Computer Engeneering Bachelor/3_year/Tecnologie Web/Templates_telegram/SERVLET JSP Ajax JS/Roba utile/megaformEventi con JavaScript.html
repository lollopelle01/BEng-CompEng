<!DOCTYPE html>
<html>
	<head>
		<meta charset="ISO-8859-1">
		<title>Megaform</title>
		
		<link rel="stylesheet" href="../styles/megaform.css" type="text/css"> 
		<script type="text/javascript"> <!--
			window.onload = function() {
				printData();
				window.setInterval(printData, 1000);
				var fieldset = document.getElementById("interactive");
				var childnodes = fieldset.elements;
				for (var i = 0; i<childnodes.length; i++) {
					childnodes[i].onclick=new Function("printEvent(this, 'Click');");
					childnodes[i].onchange=new Function("printEvent(this, 'Change');");
					childnodes[i].onfocus=new Function("printEvent(this, 'Focus');");
					childnodes[i].onblur=new Function("printEvent(this, 'Blur');");
					childnodes[i].onselect=new Function("printEvent(this, 'Select');");
					childnodes[i].ondblclick=new Function("printEvent(this, 'Click');");
				}
				childnodes.svuota_eventi.onclick = new Function ("this.form.eventi.value=''; printEvent(this, 'Click');");
				childnodes.sottometti.onclick = new Function ("printEvent(this, 'Click'); return false");
				childnodes.azzera.onclick = new Function ("this.form.reset(); printEvent(this, 'Click'); return false");
				
				var areaMessaggio = document.myform.messaggio;
				areaMessaggio.onmouseover = new Function ("this.style.backgroundColor = 'blue'");
				areaMessaggio.onmouseout = new Function ("this.style.backgroundColor = 'white'");
				areaMessaggio.onkeyup = new Function ("handleKeys(this);");
				
				var numcharField = document.myform.numchar;
				numcharField.value = 64 - areaMessaggio.textLength;
			}
		
			function handleKeys(areaMessaggio) {
				if (areaMessaggio.textLength > 64) {
					var newMex = areaMessaggio.value.substr(0, 64);
					areaMessaggio.value = newMex;
				}
				document.myform.numchar.value = 64 - areaMessaggio.textLength;
			}
		
			function printEvent(element, event) {
				var textarea = document.getElementById("eventi");
				var value="";
				if (element.type == "select-multiple" || element.type == "select-one") {
					var options = element.selectedOptions;
					for (var i = 0; i<options.length; i++)
						value += options[i].value+" ";
				}
				if (value.length == 0 && element.type != "textarea")
					value = element.value;
				if (value == null || value.length == 0)
					value = "Nessun valore";
				textarea.value+=event+": "+element.name+" ("+value+")\n";
			}
			
			function printData() {
				var div = document.getElementById("data");
				var date = new Date();
				var day = date.getDay();
				var dayOfWeek;
				switch (day) {
				case (0):
					dayOfWeek = "domenica";
					break;
				case (1):
					dayOfWeek = "lunedì";
					break;
				case (2):
					dayOfWeek = "martedì";
					break;
				case (3):
					dayOfWeek = "mercoledì";
					break;
				case (4):
					dayOfWeek = "giovedì";
					break;
				case (5):
					dayOfWeek = "venerdì";
					break;
				case (6):
					dayOfWeek = "sabato";
					break;
				default:
					break;
				}
				var month = date.getMonth();
				var monthString;
				switch (month) {
				case (0):
					monthString = "gennaio";
					break;
				case (1):
					monthString = "febbraio";
					break;
				case (2):
					monthString = "marzo";
					break;
				case (3):
					monthString = "aprile";
					break;
				case (4):
					monthString = "maggio";
					break;
				case (5):
					monthString = "giugno";
					break;
				case (6):
					monthString = "luglio";
					break;
				case (7):
					monthString = "agosto";
					break;
				case (8):
					monthString = "settembre";
					break;
				case (9):
					monthString = "ottobre";
					break;
				case (10):
					monthString = "novembre";
					break;
				case (11):
					monthString = "dicembre";
					break;
				default:
					break;
				}
				var text = document.createTextNode("Oggi è "+dayOfWeek+" "+date.getDate()+" "+monthString+" "+date.getFullYear()+", ore "+date.getHours()+":"+date.getMinutes()+":"+date.getSeconds());
				if (div.firstChild != null)
					div.removeChild(div.firstChild);
				div.appendChild(text);
			}
		--></script>
	</head>
	<body>
		<form name="myform" action="#">
			<fieldset id="interactive">
				<legend>Questionario</legend>
				<div id="data"></div>
				<br/>
				<label>Il tuo nome: <br/><input name="nome" type="text" id="nome"></label>
				<label>La tua parola di accesso: <br/><input name="password" type="text" id="password"></label>
				<label>Nome del file: <br/><input name="filename" type="file" id="filename"></label>
				
				<label>Quale dei miei figli preferisci?<br/>
					<input type="checkbox" name="figli" value="Bart">Bart
					<br/>
					<input type="checkbox" name="figli" value="Lisa" checked="checked">Lisa
					<br/>
					<input type="checkbox" name="figli" value="Maggie">Maggie
					<br/>
				</label>
				
				<label>Chi &egrave; il più divertente?<br/>
					<input type="radio" name="divertente" value="Homer" checked="checked">Homer
					<br/>
					<input type="radio" name="divertente" value="Bart">Bart
					<br/> 
					<input type="radio" name="divertente" value="Lisa">Lisa
					<br/>
				</label>
				
				<label>Scegli dei passatempi:<br/>
					 <select name="passatempo" multiple="multiple" size="4">
					 	<option value="musica">musica</option>
					 	<option value="sport" selected="selected">sport</option>
					 	<option value="viaggi">viaggi</option>
						<option value="letture">letture</option>
					</select> 
				</label>
				
				<label>Il tuo colore preferito:<br/>
					 <select name="colore">
					 	<option value="rosso" selected="selected">rosso</option>
					 	<option value="verde" selected="selected">verde</option>
					 	<option value="giallo" selected="selected">giallo</option>
					 	<option value="blu" selected="selected">blu</option>
					 	<option value="viola" selected="selected">viola</option>
					 	<option value="rosa" selected="selected">rosa</option>
					</select> 
				</label>
				
				<label>Eventi in ingresso:
					<br/>
					<textarea id="eventi" name="eventi" rows="22" cols="30" readonly="readonly"></textarea>
					<br/>
				</label>
				
				<label>Pulsanti:
					<button name="svuota_eventi" type="button">svuota eventi</button>&nbsp;
					<button name="sottometti" type="submit">sottometti</button>&nbsp;
					<button name="azzera" type="reset">azzera</button>
				</label>
				
			</fieldset>
			<fieldset>
				<legend>Messaggi</legend>
				<label>Inserisci un breve messaggio
					<br/>
					<textarea id="messaggio" name="messaggio" rows="4" cols="25">Ciao a tutti</textarea>
					<br/>
					<input type="text" id="numchar" name="numchar" disabled="disabled" size="1">
					<br/>
				</label>
			</fieldset>
		</form>
	</body>
</html>