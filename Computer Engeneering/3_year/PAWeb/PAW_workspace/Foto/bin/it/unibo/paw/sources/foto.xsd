<?xml version="1.0" encoding="utf-8" ?>

<!-- SCALETTA SCRITTURA SCHEMA -->
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">

	<xs:simpleType name="tipo">
		<xs:restriction base="xs:string">
			<xs:pattern value="(DB|DC)"/>
		</xs:restriction>
	</xs:simpleType>

	<xs:simpleType name="jpg">
		<xs:restriction base="xs:string">
			<xs:pattern value=".+\.jpg"/>
		</xs:restriction>
	</xs:simpleType>
	
	<xs:complexType name="posizione">
		<xs:sequence>
			<xs:element name="nome_luogo" type="xs:string"/>
			<xs:element name="latitudine" type="xs:float"/>
			<xs:element name="longitudine" type="xs:float"/>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="fotografia">
		<xs:sequence>
			<xs:element name="data_scatto" type="xs:date"/>
			<xs:element name="nome_file" type="jpg"/> 
			<xs:element name="tag" type="xs:string" minOccurs="0" maxOccurs="unbounded"/>
			<xs:element name="posizione" type="posizione"/>
		</xs:sequence>
	</xs:complexType>

	<xs:complexType name="autore">
		<xs:sequence>
			<xs:element name="nome" type="xs:string"/>
			<xs:element name="cognome" type="xs:string"/>
		</xs:sequence>
	</xs:complexType>

    <xs:complexType name="album">
		<xs:sequence>
			<xs:element name="tipo" type="tipo"/>
			<xs:element name="autore" type="autore"/>
			<xs:element name="titolo" type="xs:string"/>
			<xs:element name="data_inizio" type="xs:date"/>
			<xs:element name="data_fine" type="xs:date"/>
			<xs:sequence>
				<xs:element name="fotografia" type="fotografia" maxOccurs="unbounded"/>
			</xs:sequence>
		</xs:sequence>
	</xs:complexType>
	
	<xs:complexType name="albums">
		<xs:sequence>
			<xs:element name="album" type="album" maxOccurs="unbounded"/>
		</xs:sequence>
	</xs:complexType>

	<!-- Istanza finale -->
	<xs:element name="albums" type="albums"/>
</xs:schema>